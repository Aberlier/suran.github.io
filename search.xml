<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>关于学生总成绩排名问题及Collections使用</title>
    <url>/2019/10/22/%E5%85%B3%E4%BA%8E%E5%AD%A6%E7%94%9F%E6%80%BB%E6%88%90%E7%BB%A9%E6%8E%92%E5%90%8D%E9%97%AE%E9%A2%98%E5%8F%8ACollections%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h2 id="关于学生总成绩排名问题及Collections使用"><a href="#关于学生总成绩排名问题及Collections使用" class="headerlink" title="关于学生总成绩排名问题及Collections使用"></a>关于学生总成绩排名问题及Collections使用</h2><p>写一个项目真是存在很多的bug,修复的时间往往比开发所需要的时间更长，今天又出了一个bug,在这里记录一下，主要是针对系统中学生的成绩排名。</p>
<h4 id="出现的问题是当管理员对成绩进行删除操作的时候排名不会变化"><a href="#出现的问题是当管理员对成绩进行删除操作的时候排名不会变化" class="headerlink" title="出现的问题是当管理员对成绩进行删除操作的时候排名不会变化"></a>出现的问题是当管理员对成绩进行删除操作的时候排名不会变化</h4><p>因为成绩是以Excel表格的形式进行导入的，在导入的同时对里面的成绩进行汇总和排序，在排序上分别对学生成绩的班级进行排名和全校名次进行排名，排名的关键点就是考试的批次，这么说可能有点笼统，下面举个栗子：</p>
<p> <img alt="img" data-src="https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1571755425&di=89f9186748746fae06a09b354579d8ed&src=http://himg2.huanqiu.com/attachment2010/2017/0411/20170411011851880.jpg" class="lozad"> </p>
<h6 id="栗子："><a href="#栗子：" class="headerlink" title="栗子："></a>栗子：</h6><p>成绩由管理员和教师进行上传，上传的同时教师选择考试批次：第一次模拟考试 ，选择班主任，选择Excel文件，然后点击导入。对于导入文件功能等过几天我在发布上来。</p>
 <img class="lozad" title="This is an example image" data-src="/2019/10/22/%E5%85%B3%E4%BA%8E%E5%AD%A6%E7%94%9F%E6%80%BB%E6%88%90%E7%BB%A9%E6%8E%92%E5%90%8D%E9%97%AE%E9%A2%98%E5%8F%8ACollections%E4%BD%BF%E7%94%A8/1571755614542.png"> 

<p>在后台就是</p>
 <img class="lozad" title="This is an example image" data-src="/2019/10/22/%E5%85%B3%E4%BA%8E%E5%AD%A6%E7%94%9F%E6%80%BB%E6%88%90%E7%BB%A9%E6%8E%92%E5%90%8D%E9%97%AE%E9%A2%98%E5%8F%8ACollections%E4%BD%BF%E7%94%A8/1571756051728.png"> 

<p>在这里可以看到考试批次的eid编号，所以在排序的时候sql语句加一个where值为eid，根据考试批次进行班级和全校的排名。</p>
<h4 id="以区域排名为例"><a href="#以区域排名为例" class="headerlink" title="以区域排名为例"></a>以区域排名为例</h4><pre><code>Control
//区域排名
    List&lt;Score&gt; listAllR = scoreService.findRegionalranking(eid);//获取学生的班级排名
    if(listAllR==null||listAllR.equals(&quot;&quot;)){
        String failurl=request.getContextPath()+&quot;/ScoreServlet?action=adm_findAllScore&quot;;
        String msg = &quot;&lt;script&gt;window.alert(&apos;该考试批次已不存在相关学生成绩！&apos;);window.location.href=&apos;&quot;+failurl+&quot;&apos;;&lt;/script&gt;&quot;;
        request.setAttribute(&quot;msg&quot;, msg);
        request.getRequestDispatcher(&quot;msg.jsp&quot;).forward(request, response);    
    }else{
        Collections.sort(listAllR);//将数据库查询的数组进行排序
        for (int i = 0; i &lt;listAllR.size(); i++) {
            listAllR.get(i).setRegionalranking(i+1+&quot;&quot;);
            scoreService.updateRegionalranking(listAllR.get(i));
        }
    }</code></pre><h3 id="Collections-中有一个方法叫做sort可以对集合中的内容进行排序"><a href="#Collections-中有一个方法叫做sort可以对集合中的内容进行排序" class="headerlink" title="Collections 中有一个方法叫做sort可以对集合中的内容进行排序"></a>Collections 中有一个方法叫做sort可以对集合中的内容进行排序</h3><p> static void sort(List list)： 对集合中的内容进行排序</p>
<p>要使用这个sort方法进行排序的集合，里面的泛型必须实现Comparable接口</p>
<p>实现这个接口的对象才具备排序的功能， 这种排序自然排序。</p>
<p>口诀：<br>升序就是我减他，降续就是他减我</p>
<p>想要在哪个对象中使用就要继承Comparable接口</p>
 <img class="lozad" title="This is an example image" data-src="/2019/10/22/%E5%85%B3%E4%BA%8E%E5%AD%A6%E7%94%9F%E6%80%BB%E6%88%90%E7%BB%A9%E6%8E%92%E5%90%8D%E9%97%AE%E9%A2%98%E5%8F%8ACollections%E4%BD%BF%E7%94%A8/1571757435627.png"> 

<p>与此同时我们按照降序排列</p>
<img class="lozad" title="This is an example image" data-src="/2019/10/22/%E5%85%B3%E4%BA%8E%E5%AD%A6%E7%94%9F%E6%80%BB%E6%88%90%E7%BB%A9%E6%8E%92%E5%90%8D%E9%97%AE%E9%A2%98%E5%8F%8ACollections%E4%BD%BF%E7%94%A8/1571757402288.png"> 

<p>然后调用scoreService.updateRegionalranking(listAllR.get(i));这个方法，将请求送到Dao，最后修改排名。</p>
<h3 id="效果如下"><a href="#效果如下" class="headerlink" title="效果如下"></a>效果如下</h3><p>未删除成绩前界面如下：</p>
<img class="lozad" title="This is an example image" data-src="/2019/10/22/%E5%85%B3%E4%BA%8E%E5%AD%A6%E7%94%9F%E6%80%BB%E6%88%90%E7%BB%A9%E6%8E%92%E5%90%8D%E9%97%AE%E9%A2%98%E5%8F%8ACollections%E4%BD%BF%E7%94%A8/1571757792968.png"> 

<p>点击删除乔峰，木婉清就变成了第一名，效果如下</p>
<img class="lozad" title="This is an example image" data-src="/2019/10/22/%E5%85%B3%E4%BA%8E%E5%AD%A6%E7%94%9F%E6%80%BB%E6%88%90%E7%BB%A9%E6%8E%92%E5%90%8D%E9%97%AE%E9%A2%98%E5%8F%8ACollections%E4%BD%BF%E7%94%A8/1571757871623.png"> 

<p>总之，还是很烦返修程序的，但是程序都是在不断的探索中逐步强化，自身的能力也是一样，写到这里了，睡觉去，猪儿说不能熬夜！❤</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>排名</tag>
        <tag>Collections</tag>
        <tag>猪儿</tag>
      </tags>
  </entry>
  <entry>
    <title>互联网大厂常考笔试题001-static的作用</title>
    <url>/2019/10/21/%E4%BA%92%E8%81%94%E7%BD%91%E5%A4%A7%E5%8E%82%E5%B8%B8%E8%80%83%E7%AC%94%E8%AF%95%E9%A2%98001-static%E7%9A%84%E4%BD%9C%E7%94%A8/</url>
    <content><![CDATA[<p>今天摘选了一些著名互联网企业的一些Java面试笔试真题以及考察知识点，以便提供读者参考。</p>
<h2 id="static的作用"><a href="#static的作用" class="headerlink" title="static的作用"></a>static的作用</h2><p>static关键字有以下三种使用方法：</p>
<p>1.被static修饰的变量属于静态变量，类变量，可以通过类名，变量名直接引用，不需要进行new一个新类。</p>
<p>2.被static修饰的方法属于静态方法，类方法，可以通过类名，方法名直接引用，而不需要new出来一个对象</p>
<p>3.静态块，用于初始化一个类的时候进行一些操作，静态变量、静态方法和静态代码块都只执行一次，而且只在初始化的时候执行。</p>
<h6 id="首先静态变量："><a href="#首先静态变量：" class="headerlink" title="首先静态变量："></a>首先静态变量：</h6><p> 静态变量被所有变量所共享，在内存中只存在一种副本，只在（当且仅当）类初次加载时被初始化，生命周期边长，只有程序结束才能够被销毁。而非静态变量是单个对象所拥有的，存在多个副本，各个对象之间副本互不影响。</p>
<h6 id="其次静态方法："><a href="#其次静态方法：" class="headerlink" title="其次静态方法："></a>其次静态方法：</h6><p>静态方法是所有类都能够调用和共同存在的方法，由于静态方法不依赖于任何对象就可以进行访问，因此对于静态方法来说，是没有this的，因为this表示是当前对象，因为它不依附于任何对象，既然都没有对象，就谈不上this了。 并且由于这个特性，在静态方法中不能访问类的非静态成员变量和非静态成员方法，因为非静态成员方法/变量都是必须依赖具体的对象才能够被调用。 最大的作用就是可以”类名.方法名”调用该方法。但是在实际开发中也少用到该方式，因为一是static修饰后的方法资源共享，在多线程场景不安全。二是静态资源常驻内存，很难被回收， </p>
<h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h3><p> 被static修饰的变量和被static修饰的方法统一属于类的<strong>静态资源，是类实例之间共享的，换言之，一处变、处处变</strong>。 </p>
<h6 id="最后是静态块"><a href="#最后是静态块" class="headerlink" title="最后是静态块:"></a>最后是静态块:</h6><p>static修饰静态块后，将要修饰的成员同一放在一个static中。该静态化会在第一次使用类时，最先初始化static修饰的静态块。并且在程序运行过程中，只需要初始化一次，不会进行多次初始化。以下代码是静态代码块以流的模式获取test.properties文件内容。链接 <a href="https://blog.csdn.net/chengly0129/article/details/49493297" target="_blank" rel="noopener">https://blog.csdn.net/chengly0129/article/details/49493297</a> </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">  Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">  InputStream in = Object.class.getResourceAsStream(<span class="string">"/test.properties"</span>);</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    prop.load(in);</span><br><span class="line">    param1 = prop.getProperty(<span class="string">"initYears1"</span>).trim();</span><br><span class="line">    param2 = prop.getProperty(<span class="string">"initYears2"</span>).trim();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么我们思考，为什么 JDK把不同的静态资源放在了不同的类中而不把所有静态资源放在一个类里面，很多人可能想当然认为当然要这么做，但是是否想过为什么要这么做呢？个人认为主要有三个好处： </p>
<p>1、不同的类有自己的静态资源，这可以实现静态资源分类。比如和数学相关的静态资源放在java.lang.Math中，和日历相关的静态资源放在java.util.Calendar中，这样就很清晰了</p>
<p>2、避免重名。不同的类之间有重名的静态变量名、静态方法名也是很正常的，如果所有的都放在一起不可避免的一个问题就是名字重复，这时候怎么办？分类放置就好了。</p>
<p>3、避免静态资源类无限膨胀，这很好理解。</p>
<p> OK，再微微深入一下，也是有些人容易混淆的一个问题：静态方法能不能引用非静态资源？静态方法里面能不能引用静态资源？非静态方法里面能不能引用静态资源？比如就以这段代码为例，是否有错？ </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">2 </span>&#123;</span><br><span class="line"><span class="number">3</span>     <span class="keyword">private</span> <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="number">4</span>     </span><br><span class="line"><span class="number">5</span>     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">6     </span>&#123;</span><br><span class="line"><span class="number">7</span>         i = <span class="number">1</span>;</span><br><span class="line"><span class="number">8</span>     &#125;</span><br><span class="line"><span class="number">9</span> &#125;</span><br></pre></td></tr></table></figure>

<p>当然有错，在第7行的地方。不妨这么思考这个问题：</p>
<p>静态资源属于类，但是是独立于类存在的。从JVM的类加载机制的角度讲，<strong>静态资源是类初始化的时候加载的，而非静态资源是类new的时候加载的</strong>。类的初始化早于类的new，比如Class.forName(“xxx”)方法，就是初始化了一个类，但是并没有new它，只是加载这个类的静态资源罢了。所以对于静态资源来说，它是不可能知道一个类中有哪些非静态资源的；但是对于非静态资源来说就不一样了，由于它是new出来之后产生的，因此属于类的这些东西它都能认识。所以上面的几个问题答案就很明确了：</p>
<p>1、静态方法能不能引用非静态资源？不能，new的时候才会产生的东西，对于初始化后就存在的静态资源来说，根本不认识它。</p>
<p>2、静态方法里面能不能引用静态资源？可以，因为都是类初始化的时候加载的，大家相互都认识。</p>
<p>3、非静态方法里面能不能引用静态资源？可以，非静态方法就是实例方法，那是new之后才产生的，那么属于类的内容它都认识。</p>
]]></content>
      <categories>
        <category>Java</category>
        <category>面试笔试</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>面试笔试</tag>
        <tag>笔试题static的作用</tag>
      </tags>
  </entry>
  <entry>
    <title>学长给你们的大学指南</title>
    <url>/2019/10/20/hello-world%20-%20%E5%89%AF%E6%9C%AC/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>由于一个“ 引发的事故</title>
    <url>/2019/10/20/error001/</url>
    <content><![CDATA[<p>前阵子在写程序的时候出现了这么一个错误：<br>org.apache.jasper.JasperException: /WEB-INF/pages/accessory/accessoryHome.jsp(1,61) quote symbol expected</p>
<p>错误代码如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;c:when <span class="built_in">test</span>=<span class="variable">$&#123;page.page==1 &#125;</span>&gt;</span><br><span class="line">          &lt;li class=<span class="string">"active"</span>&gt;&lt;a href=<span class="string">"javascript:void();"</span> title=<span class="string">"首页"</span>&gt;首页&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br></pre></td></tr></table></figure>
<p>quote symbol expected：quote symbol就是引号,expected就是期待连起来就是我代码少写引号了；</p>
<p>正确代码如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;c:when <span class="built_in">test</span>=<span class="variable">$&#123;"page.page==1" &#125;</span>&gt;</span><br><span class="line">   &lt;li class=<span class="string">"active"</span>&gt;&lt;a href=<span class="string">"javascript:void();"</span> title=<span class="string">"首页"</span>&gt;首页&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>错误集锦</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Exception</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>张某人技术交流站</title>
    <url>/2019/10/19/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
</search>
